<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EcoImpact AI - Assessment</title>
    <style>
        /* Import Normalize.css and Gloria Hallelujah font */
        @import url('https://unpkg.com/normalize.css') layer(normalize);
        @import url('https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap');

        /* Define layers */
        @layer normalize, base, demo;

        /* Base layer styles */
        @layer base {
            :root {
                --font-size-min: 16;
                --font-size-max: 20;
                --font-ratio-min: 1.2;
                --font-ratio-max: 1.33;
                --font-width-min: 375;
                --font-width-max: 1500;
                --content-width: 720px;
            }

            html {
                color-scheme: light dark;
            }

            [data-theme='light'] {
                color-scheme: light only;
            }

            [data-theme='dark'] {
                color-scheme: dark only;
            }

            :where(.fluid) {
                --fluid-min: calc(
                  var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0))
                );
                --fluid-max: calc(
                  var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0))
                );
                --fluid-preferred: calc(
                  (var(--fluid-max) - var(--fluid-min)) /
                    (var(--font-width-max) - var(--font-width-min))
                );
                --fluid-type: clamp(
                  (var(--fluid-min) / 16) * 1rem,
                  ((var(--fluid-min) / 16) * 1rem) -
                    (((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) +
                    (var(--fluid-preferred) * var(--variable-unit, 100vi)),
                  (var(--fluid-max) / 16) * 1rem
                );
                font-size: var(--fluid-type);
            }

            *,
            *:after,
            *:before {
                box-sizing: border-box;
            }

            body {
                background: light-dark(#fff, #000);
                overflow-x: hidden;
                min-height: 100vh;
                font-family: 'SF Pro Text', 'SF Pro Icons', 'AOS Icons', 'Helvetica Neue',
                  Helvetica, Arial, sans-serif, system-ui;
                padding: 2rem;
                margin: 0;
            }

            /* Optional: Add the subtle grid background */
            body::before {
                --size: 45px;
                --line: color-mix(in hsl, CanvasText, transparent 80%);
                content: '';
                height: 100vh;
                width: 100vw;
                position: fixed;
                background: linear-gradient(
                      90deg,
                      var(--line) 1px,
                      transparent 1px var(--size)
                    )
                    calc(var(--size) * 0.36) 50% / var(--size) var(--size),
                  linear-gradient(var(--line) 1px, transparent 1px var(--size)) 0%
                    calc(var(--size) * 0.32) / var(--size) var(--size);
                mask: linear-gradient(-20deg, transparent 50%, white);
                top: 0;
                transform-style: flat;
                pointer-events: none;
                z-index: -1;
            }

            /* Utilities */
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border-width: 0;
            }
        }

        /* Demo layer styles - adapted for our form */
        @layer demo {
            .container {
                width: var(--content-width);
                max-width: calc(100vw - 4rem);
                margin: 2rem auto 12rem; /* Increased bottom margin to make space for dock */
            }

            .glass-card {
                background: light-dark(
                    hsl(0 0% 100% / var(--frost, 0.15)),
                    hsl(0 0% 0% / var(--frost, 0.15))
                );
                backdrop-filter: saturate(var(--saturation, 1.5)) blur(10px);
                border-radius: calc(var(--radius, 12) * 1px);
                padding: 2rem;
                box-shadow:
                    0 0 2px 1px
                        light-dark(
                          color-mix(in oklch, CanvasText, #0000 85%),
                          color-mix(in oklch, CanvasText, #0000 65%)
                        )
                        inset,
                    0 0 10px 4px
                        light-dark(
                          color-mix(in oklch, CanvasText, #0000 90%),
                          color-mix(in oklch, CanvasText, #0000 85%)
                        )
                        inset,
                    0px 4px 16px rgba(17, 17, 26, 0.05),
                    0px 8px 24px rgba(17, 17, 26, 0.05),
                    0px 16px 56px rgba(17, 17, 26, 0.05),
                    0px 4px 16px rgba(17, 17, 26, 0.05) inset,
                    0px 8px 24px rgba(17, 17, 26, 0.05) inset,
                    0px 16px 56px rgba(17, 17, 26, 0.05) inset;
                animation: fadeIn 0.5s ease-out;
                color: CanvasText;
            }

            .form-group {
                margin-bottom: 1.25rem;
                animation: slideIn 0.3s ease-out;
                animation-fill-mode: backwards;
            }

            /* Stagger animation delays for form groups */
            .form-group:nth-child(1) { animation-delay: 0.1s; }
            .form-group:nth-child(2) { animation-delay: 0.2s; }
            .form-group:nth-child(3) { animation-delay: 0.3s; }
            .form-group:nth-child(4) { animation-delay: 0.4s; }
            .form-group:nth-child(5) { animation-delay: 0.5s; }
            .form-group:nth-child(6) { animation-delay: 0.6s; }
            .form-group:nth-child(7) { animation-delay: 0.7s; }
            .form-group:nth-child(8) { animation-delay: 0.8s; }
            .form-group:nth-child(9) { animation-delay: 0.9s; }
            .form-group:nth-child(10) { animation-delay: 1.0s; }
            .form-group:nth-child(11) { animation-delay: 1.1s; }
            .form-group:nth-child(12) { animation-delay: 1.2s; }
            .form-group:nth-child(13) { animation-delay: 1.3s; }

            label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 600;
                color: CanvasText;
            }

            input[type="number"], input[type="text"], select {
                width: 100%;
                padding: 0.75rem;
                box-sizing: border-box;
                border: 1px solid light-dark(CanvasText, color-mix(in oklch, CanvasText, #0000 30%));
                border-radius: 0.625rem;
                background: light-dark(color-mix(in oklch, Canvas, #0000 80%), color-mix(in oklch, Canvas, #0000 80%));
                color: CanvasText;
                font-size: 1rem;
                transition: background 0.3s, border-color 0.3s;
            }

            input[type="number"]:focus, input[type="text"]:focus, select:focus {
                outline: none;
                background: light-dark(color-mix(in oklch, Canvas, #0000 70%), color-mix(in oklch, Canvas, #0000 70%));
                border-color: light-dark(color-mix(in oklch, CanvasText, #0000 50%), color-mix(in oklch, CanvasText, #0000 50%));
            }

            input[type="number"]::placeholder, input[type="text"]::placeholder {
                 color: light-dark(color-mix(in oklch, CanvasText, #0000 50%), color-mix(in oklch, CanvasText, #0000 50%));
            }

            button {
                padding: 0.75rem 1.56rem;
                background: light-dark(#4facfe, #4facfe);
                color: white;
                border: none;
                border-radius: 0.625rem;
                cursor: pointer;
                font-size: 1rem;
                font-weight: bold;
                margin-right: 0.94rem;
                transition: transform 0.2s, box-shadow 0.2s;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }

            button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .log-button {
                background: light-dark(#a6c0fe, #a6c0fe);
            }

            .log-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .error {
                color: #ff6b6b;
                background: light-dark(color-mix(in srgb, #ff6b6b, white 80%), color-mix(in srgb, #ff6b6b, black 80%));
                padding: 0.94rem;
                border-radius: 0.625rem;
                margin-top: 1.25rem;
                border: 1px solid light-dark(color-mix(in srgb, #ff6b6b, white 70%), color-mix(in srgb, #ff6b6b, black 70%));
                animation: fadeIn 0.5s ease-out;
            }

            .result {
                margin-top: 1.56rem;
                padding: 1.25rem;
                background: light-dark(color-mix(in srgb, #2ecc71, white 80%), color-mix(in srgb, #2ecc71, black 80%));
                border: 1px solid light-dark(color-mix(in srgb, #2ecc71, white 70%), color-mix(in srgb, #2ecc71, black 70%));
                border-radius: 0.94rem;
                animation: fadeIn 0.5s ease-out;
            }

            .result h3 {
                margin-top: 0;
                color: CanvasText;
            }

            .result pre {
                color: CanvasText;
                background: light-dark(color-mix(in oklch, Canvas, #0000 90%), color-mix(in oklch, Canvas, #0000 90%));
                padding: 0.94rem;
                border-radius: 0.625rem;
                overflow-x: auto;
                white-space: pre-wrap;
                word-wrap: break-word;
            }

            .form-section {
                margin-bottom: 1.56rem;
            }

            h1, h2 {
                color: CanvasText;
                border-bottom: 2px solid light-dark(color-mix(in oklch, CanvasText, #0000 70%), color-mix(in oklch, CanvasText, #0000 70%));
                padding-bottom: 0.625rem;
            }

            /* Basic Dock Styles */
            .dock {
                position: fixed;
                bottom: 20px; /* Adjust distance from bottom */
                left: 50%;
                transform: translateX(-50%);
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px; /* Space between icons */
                padding: 10px;
                background: light-dark(
                    hsl(0 0% 100% / 0.2),
                    hsl(0 0% 0% / 0.2)
                );
                backdrop-filter: blur(10px);
                border-radius: 16px;
                border: 1px solid light-dark(
                    color-mix(in oklch, CanvasText, #0000 20%),
                    color-mix(in oklch, CanvasText, #0000 20%)
                );
                box-shadow:
                    0 4px 30px rgba(0, 0, 0, 0.1),
                    inset 0 0 2px 1px light-dark(
                        color-mix(in oklch, CanvasText, #0000 10%),
                        color-mix(in oklch, CanvasText, #0000 10%)
                    );
                z-index: 1000000; /* Ensure it's on top */
            }

            .dock-icon {
                width: 60px; /* Size of each icon */
                height: 60px;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: transform 0.2s ease-out; /* Smooth hover effect */
            }

            .dock-icon:hover {
                transform: scale(1.2); /* Enlarge on hover */
            }

            .dock-icon img {
                width: 100%;
                height: 100%;
                object-fit: contain; /* Maintain aspect ratio */
                border-radius: 8px; /* Slightly rounded corners for icons */
            }

            /* Animations */
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }

            @keyframes slideIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="fluid">EcoImpact AI - Environmental Impact Assessment</h1>
        <div class="glass-card" style="--frost: 0.15; --saturation: 1.5; --radius: 12;">
            <form method="POST">
                <div class="form-section">
                    <h2 class="fluid">Mining Operation Details</h2>
                    <div class="form-group">
                        <label for="annual_production_volume">Annual Production Volume (tons/year):</label>
                        <input type="number" step="any" id="annual_production_volume" name="annual_production_volume" required placeholder="e.g., 350000">
                    </div>
                    <div class="form-group">
                        <label for="mining_depth">Mining Depth (meters):</label>
                        <input type="number" step="any" id="mining_depth" name="mining_depth" required placeholder="e.g., 450">
                    </div>
                    <div class="form-group">
                        <label for="operation_years">Operation Years:</label>
                        <input type="number" step="any" id="operation_years" name="operation_years" required placeholder="e.g., 25">
                    </div>
                    <div class="form-group">
                        <label for="mine_type">Type of Mine:</label>
                        <select id="mine_type" name="mine_type" required>
                            <option value="" disabled selected>Select...</option>
                            <option value="Open-pit">Open-pit</option>
                            <option value="Underground">Underground</option>
                            <option value="Mixed">Mixed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="primary_mineral_type">Primary Mineral Type:</label>
                        <select id="primary_mineral_type" name="primary_mineral_type" required>
                            <option value="" disabled selected>Select...</option>
                            <option value="Coal">Coal</option>
                            <option value="Copper">Copper</option>
                            <option value="Gold">Gold</option>
                            <option value="Uranium">Uranium</option>
                            <option value="Iron">Iron</option>
                            <option value="Zinc-Lead">Zinc-Lead</option>
                            <option value="Polymetallic">Polymetallic</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h2 class="fluid">Geographic Parameters</h2>
                    <div class="form-group">
                        <label for="distance_to_water_body">Distance to Nearest Water Body (km):</label>
                        <input type="number" step="any" id="distance_to_water_body" name="distance_to_water_body" required placeholder="e.g., 3.2">
                    </div>
                    <div class="form-group">
                        <label for="elevation">Elevation (meters above sea level):</label>
                        <input type="number" step="any" id="elevation" name="elevation" required placeholder="e.g., 340">
                    </div>
                    <div class="form-group">
                        <label for="annual_precipitation">Annual Precipitation (mm/year):</label>
                        <input type="number" step="any" id="annual_precipitation" name="annual_precipitation" required placeholder="e.g., 120">
                    </div>
                    <div class="form-group">
                        <label for="soil_type">Soil Type:</label>
                        <select id="soil_type" name="soil_type" required>
                            <option value="" disabled selected>Select...</option>
                            <option value="Sandy">Sandy</option>
                            <option value="Clay">Clay</option>
                            <option value="Loam">Loam</option>
                            <option value="Rocky">Rocky</option>
                            <option value="Mountain">Mountain</option>
                            <option value="Desert">Desert</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h2 class="fluid">Environmental Baseline</h2>
                    <div class="form-group">
                        <label for="baseline_water_quality">Baseline Water Quality (1-10):</label>
                        <input type="number" step="any" id="baseline_water_quality" name="baseline_water_quality" min="1" max="10" required placeholder="e.g., 6.5">
                    </div>
                    <div class="form-group">
                        <label for="baseline_air_quality">Baseline Air Quality (1-10):</label>
                        <input type="number" step="any" id="baseline_air_quality" name="baseline_air_quality" min="1" max="10" required placeholder="e.g., 7">
                    </div>
                    <div class="form-group">
                        <label for="baseline_vegetation_ndvi">Baseline Vegetation NDVI (0-1):</label>
                        <input type="number" step="any" id="baseline_vegetation_ndvi" name="baseline_vegetation_ndvi" min="0" max="1" required placeholder="e.g., 0.45">
                    </div>
                </div>

                <button type="submit">Submit for Analysis</button>
                <a href="{{ url_for('show_logs') }}"><button type="button" class="log-button">View Logs</button></a>
            </form>

            {% if error %}
                <div class="error">
                    <h3>Error:</h3>
                    <p>{{ error }}</p>
                </div>
            {% endif %}

            {% if result %}
                <div class="result">
                    <h3>Analysis Results:</h3>
                    <pre>{{ result | tojson(indent=2) }}</pre>
                </div>
            {% endif %}
        </div>

        <!-- Basic Dock -->
        <div class="dock">
            <!-- Example Icon with Logo -->
            <a href="/" class="dock-icon">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="EcoImpact AI Logo"> <!-- Update filename if different -->
            </a>
            <!-- Add more icons here if needed -->
            <!--
            <div class="dock-icon">
                <img src="{{ url_for('static', filename='other_icon.png') }}" alt="Other App">
            </div>
            -->
        </div>
    </div>
</body>
</html>